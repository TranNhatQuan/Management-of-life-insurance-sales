<!DOCTYPE html>
<html>

<head>
    <title>LIFE</title>
    <link href="https://cdn.datatables.net/1.11.3/css/jquery.dataTables.min.css" rel="stylesheet">
    <link href="https://cdn.datatables.net/1.11.3/css/dataTables.bootstrap5.min.css" rel="stylesheet">
    <link href="https://cdn.datatables.net/buttons/2.0.1/css/buttons.bootstrap5.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <style>
        /* CSS styles here */
        .navbar {
            /* Thiết lập vị trí */

            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 3;
        }

        #intro {
            /* Thiết lập vị trí */
            position: relative;
            z-index: 2;

        }

        #noti {
            /* Thiết lập vị trí */
            position: relative;
            z-index: 1;
            border: 1px solid #ccc;
            /* Thêm viền */
            padding: 20px;
            /* Khoảng cách giữa nội dung và viền */
            margin-top: 100px;
            margin-bottom: 20px;
            /* Khoảng cách dưới */
        }

        .form-group {
            margin: 10px;
        }

        #info {
            /* Thiết lập vị trí */
            position: relative;
            z-index: 0;
            border: 1px solid #ccc;
            /* Thêm viền */
            padding: 20px;
            /* Khoảng cách giữa nội dung và viền */
        }

        h3 {
            font-size: smaller;
            opacity: 0.5;
        }

        #idStaff {
            outline: none;
            border: none;
        }
    </style>
</head>

<body>
   
      
    <%- include('../../layout/sidebar.ejs') %>

    <% if (typeof error !== 'undefined') { %>
        <script>
          alert("<%= error %>");
        </script>
        <% delete error; %>
      <% } %>
        <div id="noti" class="container">

            <h2>Thông báo công việc</h2>
            <h3>Hiện các thông báo về việc thu tiền phí bảo hiểm các bảo hiểm mà bạn quản lý</h3>
            <table id="paymentTable" class="table table-striped table-bordered" style="width:100%">
                <thead>
                    <tr>
                        <th>ID lịch thu phí</th>
                        <th>ID hợp đồng</th>
                        <th>ID Khách</th>
                        <th>Tên khách hàng</th>
                        <th>Số điện thoại</th>
                        <th>Địa chỉ</th>
                        <th>Email</th>
                        <th>Ngày hết hạn</th>
                        <th>Số tiền</th>
                    </tr>
                </thead>
                <tbody>
                    <% contracts.forEach(function(contract) { %>
                        <tr>
                            <td>
                                <%= contract.idPayment_schedule %>
                            </td>
                            <td>
                                <%= contract.idContract %>
                            </td>
                            <td>
                                <%= contract.idUser %>
                            </td>
                            <td>
                                <%= contract.name %>
                            </td>
                            <td>
                                <%= contract.phone %>
                            </td>
                            <td>
                                <%= contract.address %>
                            </td>
                            <td>
                                <%= contract.mail %>
                            </td>
                            <td>
                                <%= contract.endDate %>
                            </td>
                            <td>
                                <%= contract.total %>.000
                            </td>
                        </tr>
                        <% }); %>
                </tbody>

            </table>
        </div>
        <div id="info" class="container">
            <div class="row">
                <div class="col-md-6">
                    <h2>Thông tin cá nhân</h2>
                    <h3>Ấn lưu để thay đổi thông tin cá nhân của bạn</h3>
                    <form action="/staff/selfEdit?url=/staff/home" method="post">
                        <div class="form-group">
                            <label for="idStaff">ID Nhân viên:</label>
                            <input type="text" id="idStaff" name="idStaff" value="<%= staff.idStaff %>" readonly>
                        </div>
                        <div class="form-group">
                            <label for="name">Tên:</label>
                            <input type="text" id="name" name="name" value="<%= staff.name %>" required>
                        </div>
                        <div class="form-group">
                            <label for="email">Email:</label>
                            <input type="email" id="email" name="email" value="<%= staff.mail %>" required>
                        </div>
                        <div class="form-group">
                            <label for="phone">Số điện thoại:</label>
                            <input type="tel" id="phone" name="phone" value="<%= staff.phone %>" required>
                        </div>
                        <div class="form-group">
                            <label for="address">Địa chỉ:</label>
                            <input type="text" id="address" name="address" value="<%= staff.address %>" required>
                        </div>



                        <div class="form-group">
                            <button type="submit">Lưu</button>
                        </div>
                    </form>
                </div>
                <div id="password-form" class="col-md-6" style="border-left: 1px solid #ccc;">
                    <h2>Đổi mật khẩu</h2>
                    <h3>Ấn lưu đổi mật khẩu để thay đổi mật khẩu của bạn</h3>
                    <form action="/staff/changePassword/<%= staff.idStaff %>?url=/staff/home" method="post">
                        <div class="form-group">
                            <label for="oldPassword">Mật khẩu cũ:</label>
                            <input type="password" id="oldPassword" name="oldPassword" required>
                        </div>
                        <div class="form-group">
                            <label for="newPassword">Mật khẩu mới:</label>
                            <input type="password" id="newPassword" name="newPassword" required>
                        </div>
                        <div class="form-group">
                            <button type="submit">Đổi mật khẩu</button>
                        </div>
                    </form>
                </div>
            </div>




        </div>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.min.js"></script>
        <script src="https://cdn.datatables.net/select/1.3.3/js/dataTables.select.min.js"></script>

        <script src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.min.js"></script>
        <script src="https://cdn.datatables.net/1.11.3/js/dataTables.bootstrap5.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/2.0.1/js/dataTables.buttons.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/2.0.1/js/buttons.bootstrap5.min.js"></script>
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
        <script src="https://cdn.datatables.net/searchpanes/2.2.0/js/dataTables.searchPanes.min.js"></script>
        <script src="https://cdn.datatables.net/searchbuilder/1.2.1/js/dataTables.searchBuilder.min.js"></script>
        <script src="https://cdn.datatables.net/select/1.3.3/js/dataTables.select.min.js"></script>


        <script>
            $(document).ready(function () {
                var table = $('#paymentTable').DataTable({
                    dom: 'Blfrtip',
                    buttons: ['excelHtml5', 'pdfHtml5'],
                    language: {
                        url: 'https://cdn.datatables.net/plug-ins/1.11.3/i18n/vi.json'
                    },
                    paging: true,
                    pagingType: 'full_numbers',
                    pageLength: 5,
                    lengthChange: false,
                    searching: true,

                });
            });
        </script>
</body>

</html>